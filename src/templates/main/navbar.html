{% load static %}
<link rel="stylesheet" href="{% static 'films/css/style.css' %}">
<nav id="main-navbar"
    class="duration-500 absolute top-0 z-50 bg-letterboxd-1  md:bg-transparent  md:bg-gradient-to-t md:from-transparent  md:to-black  text-slate-100 w-screen">
    <div class="py-2 px-4 md:px-24 md:py-3 bg-rd-500">
        <!---- navbar content ----->
        <div class=" w-full mx-auto flex items-center justify-between md:justify-around">
            <!----- logo ----->
            <div class="logo">
                <!---  <img class="inline h-6" src="./images (9).jpeg">  --->
                <h1 class="font-myfont md:text-4xl text-letterboxd-6"><span>Filmflow</h1>
            </div>

            <!--------- destop  buttons --------->
            <div id="menu-for-desktop"
                class="shrink-0 text-lg hidden md:flex items-center gap-4 font-myfont  text-white">
                {% if user.is_authenticated %}
                <div id="desktop-profile-menu" class=" self-end relative  rounded-t-md flex flex-col gap-1">
                    <div class="flex gap-2 items-center py-1 px-4">
                        <img class="w-6 object-cover rounded-full" src="{{ user.profile.profile_picture.url }}">
                        <a class="hover:underline tracking-wide" href="{% url 'profiles:user_profile' user.username %}">
                            {{user.username}}
                        </a>
                    </div>
                    <div id="desktop-profile-menu-extend"
                        class="absolute hidden bg-letterboxd-3 rounded-b-md w-full top-8 border-t  border-letterboxd-1 flex text-xs flex-col font-myfontLight text-letterboxd-6">
                        <a href="{% url 'filmsabout:showWatched' user.username %}">
                            <div class="px-2 py-1 border-b border-letterboxd-1 hover:bg-letterboxd-4">
                                Films
                            </div>
                        </a>
                        <a href="{% url 'filmsabout:diary' user.username %}">
                            <div class="px-2 py-1 border-b border-letterboxd-1 hover:bg-letterboxd-4">
                                Diary
                            </div>
                        </a>

                        <a href="/{{user.username}}/reviews">
                            <div class="px-2 py-1 border-b border-letterboxd-1 hover:bg-letterboxd-4">
                                Reviews
                            </div>
                        </a>
                        <a href="{% url 'filmsabout:showWatchlist' user.username %}">
                            <div class="px-2 py-1 border-b border-letterboxd-1 hover:bg-letterboxd-4">
                                Watchlist
                            </div>
                        </a>
                        <a href="{% url 'list:showlists' user.username %}">
                            <div class="px-2 py-1 border-b border-letterboxd-1 hover:bg-letterboxd-4">
                                Lists
                            </div>
                        </a>
                        <a href="{% url 'profiles:settings' user.username  %}">
                            <div class="px-2 py-1 border-b border-letterboxd-1 hover:bg-letterboxd-4">
                                Settings
                            </div>
                        </a>

                        <div class="px-2 py-1 border-b border-letterboxd-1 hover:bg-letterboxd-4">
                            <a href="{% url 'authentication:signout' %}">Signout</a>
                        </div>
                    </div>
                </div>

                <div class="hover:underline">
                    <a href="/"> Home </a>
                </div>

                {%else%}
                <div id="desktop-signin" class="cursor-pointer hover:underline"> Sign in</div>
                <div id="create-account" class="signup-btn cursor-pointer hover:underline">Create account</div>
                {%endif%}

                <div id="lists" class="cursor-pointer hover:underline">Lists</div>
                <div id="members" class="cursor-pointer hover:underline">Members</div>

                <div id="search-field" class="relative flex">
                    <input id="search_content" type="text"
                        class=" text-letterboxd-3 font-myfontLight focus:outline-none px-2 py-1 rounded-l-full text-xs">
                    <button id="search_content_btn" type="submit" class="bg-white pr-2 rounded-r-full">
                        <svg id="search-content-svg" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                            stroke-width="1.5" stroke="black" class="w-4 h-4">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
                        </svg>
                    </button>
                </div>

                <div id="direct-log">
                    {% if user.is_authenticated %}
                    <button id="direct-log-btn" class="bg-letterboxd-4  px-4 rounded-md hover:bg-opacity-90">
                        Log
                    </button>
                    {% endif %}
                </div>
            </div>


            <!--------- mobile  buttons --------->
            <div class="flex items-center space-x-5 md:hidden">
                {% if user.is_authenticated == False %}
                <button id="signin_btn">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="md:w-8 md:h-8 stroke-letterboxd-3 fill-letterboxd-3 w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
                    </svg>
                </button>
                {% endif %}

                <button id="options_btn">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="md:w-8 md:h-8 stroke-letterboxd-3 fill-letterboxd-3 w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5" />
                    </svg>
                </button>
                <button id="search_btn">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="md:w-8 md:h-8 stroke-letterboxd-3 w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
                    </svg>
                </button>
            </div>
        </div>
    </div>


    {% if user.is_authenticated == False %}
    <div id="signin_menu"
        class="w-screen bg-letterboxd-1 overflow-hidden hidden px-2 md:py-2 md:px-16 text-letterboxd-3 drop-shadow-2xl">
        <form action="{% url 'authentication:signin' %}" method="post">
            {% csrf_token %}
            <div class="m-2">
                <label class="text-xs" for="username">Username or Email </label> <br>
                <input name="username" class="px-2 focus:outline-0 focus:bg-white bg-letterboxd-2 h-9 w-full rounded-sm"
                    type="text" name="username"> </input><br>
            </div>
            <div class="m-2">
                <label class="text-xs" for="Password">Password</label><br>
                <input name="password"
                    class="px-2 focus:outline-0 focus:bg-white text-black bg-letterboxd-2 h-9 w-full rounded-sm"
                    type="password">
            </div>
            <div class="my-5 mx-2 flex items-center justify-between text-xs md:justify-between">
                <div class="flex items-center">
                    <input class="h-3 mr-1 bg-red-400 accent-letterboxd-3" type=checkbox>Remember
                </div>
                <div class="md:w-[650px]">
                    <a class="text-letterboxd-4">forgotten?</a>
                </div>
                <button
                    class="bg-letterboxd-4 py-1 px-3 font-bold rounded-sm text-white shadow-inner tracking-widest ">SIGN
                    IN </button>
            </div>
        </form>
    </div>
    {% endif %}
    <!----- search ------>
    <div id="search_feild" class="hidden bg-letterboxd-1 p-4 md:px-20 text-gray-500 ">
        <div class="relative ">
            <input id="search_content" type="text"
                class="h-9 w-full relative   rounded-sm focus:outline-0 focus:bg-white focus:text-slate-400 p-3 bg-letterboxd-2">
            <button id="search_content_btn" type="submit"
                class="absolute hover:shadow-md hover:shadow-letterbox-3 right-2 top-2">
                <svg id="search-content-svg" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                    stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
                </svg>
            </button>
            </input>
        </div>
    </div>

    <!------ list ------>
    <div id="menu_field" class="hidden duration-1000 overflow-hidden">
        {% if user.is_authenticated %}
        <div id="loggedinMenu" class="md:px-20 flex flex-col font-myfontLight text-letterboxd-3 text-sm md:text-lg">

            <div class="flex items-center gap-x-2 py-2 px-3">
                <img class="w-7 md:w-8 object-cover rounded-full" src="{{ user.profile.profile_picture.url }}">
                <div id="username" class="text-lg md:text-2xl font-myfont">
                    {{ user.username }}
                </div>
            </div>

            <div id="" class="py-3 border-t border-letterboxd-3 grid grid-cols-2 grid-rows-4 mx-10 tracking-wide">
                <div>
                    <a href="/"> HOME </a>
                </div>

                <div>
                    <a href="{% url 'profiles:user_profile' user.username %}">PROFILE</a>
                </div>

                <div>
                    <a href="{% url 'filmsabout:showWatched' user.username %}"> FILMS </a>
                </div>

                <div>
                    <a href="{% url 'filmsabout:diary' user.username %}">DIARY</a>
                </div>

                <div>
                    <a href="/{{user.username}}/reviews">REVIEWS</a>
                </div>

                <div>
                    <a href="{% url 'filmsabout:showWatchlist' user.username %}">WATCHLIST</a>
                </div>

                <div>
                    <a href="{% url 'list:showlists' user.username %}">LISTS</a>
                </div>

                <div>
                    LIKES
                </div>

            </div>
            <div class="mx-10 border-t mb-8 tracking-wide border-letterboxd-3 py-3 grid grid-cols-2 grid-rows-1">
                <div>
                    <a href="{% url 'authentication:signout' %}">SIGNOUT</a>
                </div>
                <div>
                    <a href="{% url 'profiles:settings' user.username  %}">SETTINGS</a>
                </div>
            </div>

        </div>
        {% endif %}
        {% if user.is_authenticated == False %}
        <div class="px-5 pb-5 md:px-20 text-letterboxd-3 font-myfont tracking-wider">
            <ul class="flex flex-col ">
                <li class="py-2 border-b border-t border-letterboxd-3"> <button class="signup-btn">CREATE
                        ACCOUNT</button></li>
                <li class="py-2 border-b border-letterboxd-3">FILMS</li>
                <li class="py-2 border-b border-letterboxd-3">LISTS</li>
                <li class="py-2 border-b border-letterboxd-3">MEMBERS</li>
                <li class="py-2 ">JOURNAL</li>
            </ul>
        </div>
        {% endif %}
    </div>

    {% if messages %}
    <div id="alert" class="absolute py-3 z-50 w-screen">
        {% for message in messages %}
        <div id=""
            class="relative bg-letterboxd-5 mt-3 px-3 py-3 w-80 m-auto text-myfontlight text-sm rounded-md shadow-lg shadow-black flex items-center justify-between">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <div id="frontend-alert" class="hidden fixed top-12  py-4 z-50 w-screen">
        <div id=""
            class="relative bg-letterboxd-5 py-3 px-3 w-80 m-auto text-myfontlight text-sm rounded-md shadow-lg shadow-black flex items-center justify-between">
            <div id="alert-msg">
                {{ message }}
            </div>
            </button>
        </div>
    </div>

</nav>



<form action="{% url 'authentication:signin' %}" method="POST">
    {% csrf_token %}
    <div id="desktop-signin-form"
        class="fixed z-50 flex top-0 right-44 hidden gap-3  font-myfontLight  text-letterboxd-3 gap-2 p-3 rounded-b-lg bg-letterboxd-1">

        <div id="desktop-sigin-form-cancel" class="self-end inline-block">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="hover:stroke-letterboxd-5 w-4 h-4">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>

        </div>
        <div class="">
            <label for="username" class="text-sm">Username</label> <span
                class="text-letterboxd-4 text-sm hover:underline">forgotten?</span> <br>
            <input type="text" name="username"
                class="px-2 focus:outline-none  focus:bg-white text-gray-300 focus:text-letterboxd-1 bg-letterboxd-2 w-32 rounded-sm">
        </div>
        <div class="">
            <label for="password" class="text-sm">Password</label><br>
            <input type="password" name="password"
                class="px-2 focus:outline-none focus:bg-white text-black bg-letterboxd-2 w-32 rounded-sm">
        </div>
        <div class="self-end font-myfont text-sm text-white rounded-sm overflow-hidden ">
            <input type="submit" value="signin" class="w-16 px-2 py-1 bg-letterboxd-4">
        </div>
    </div>
</form>

<div id="log-search-field-top"
    class="flex hidden flex-col gap-1 fixed rounded-md top-0 left-24 p-3 z-50 shadow-lg shadow-black bg-letterboxd-2">
    <div class="flex justify-between items-center">
        <label class="text-sm font-myfontLight" for="film_name">Search Your Film</label>
        <svg id="log-search-cancel" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
            stroke="currentColor" class="w-3 h-3 hover:stroke-letterboxd-5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>

    </div>
    <input id="log-movie-search" name="film_name" type="text"
        class="p-2 text-sm focus:outline-none  bg-letterboxd-6 h-8 text-letterboxd-1">
    <div id="log-search-reults" class="bg-letterboxd-3 text-sm  font-myfontLight">
        <ul id="log-result_list" class=" search-list text-letterboxd-6">
        </ul>
    </div>
</div>



<div id="globle-movie-review-log"
    class="hidden px-5 bg-black bg-opacity-70 top-0 left-0  text-myfontLight fixed z-[60] flex justify-center items-center h-screen w-screen">

    <form action="/film/directlogged" method="post">
        {% csrf_token %}
        <div class="bg-letterboxd-3 drop-shadow-lg shadow-black p-3 rounded-md">
            <div class="flex items-start gap-3 ">
                <div>
                    <div
                        class="w-20 card relative rounded-md md:rounded-md  shadow-inner shadow-blue-500 overflow-hidden">
                        <a href="">
                            <img alt="{{movie.title}}" id="globle-film-log-img" class="object-cover lozad" data-src=""
                                src="">
                        </a>
                        <div
                            class="absolute shadow-[inset_0.1px_0.1px_3px_rgba(0,0,0,0.2)] shadow-white top-0 left-0 right-0 bottom-0">
                        </div>
                    </div>
                </div>
                <div class="flex flex-col text-white ">
                    <div id="globle-log-movie-name" class="font-abrilbold text-2xl">{{ movie.title }} <span
                            class="font-myfontLight">{{ release_year }}</span></div>
                    <div class="mt-1 font-myfontLight text-bold tracking-wider"> <input type="checkbox" checked
                            name="shouldlog" id="">
                        Watched on (add to diary) <input
                            class="focus:outline-none text-letterboxd-6 bg-letterboxd-2 rounded-sm p-1 text-xs"
                            type="date" name="date" id="log-datePicker">
                    </div>
                    <div class="flex gap-4 items-center">
                        {% include 'main/rating_stars.html' %}
                        <div>

                        </div>
                        <label for="direct-log-like">
                            <svg id="direct-log-like-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" class="w-9 h-9 justify-self-end ">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" />
                            </svg>
                        </label>
                        <input id="direct-log-like" name="ready-log-liked" type="checkbox" class="hidden">
                    </div>
                </div>
                <div class="">
                    <div id="direct-log-review-cancel-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </div>
                </div>
            </div>
            <div>
                <textarea name="review"
                    class="focus:outline-none mt-4 text-black font-myfontLight p-3 peer block min-h-[auto] w-full rounded border-0 bg-white py-[0.32rem] px-3 leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none  [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0"
                    id="reiview" rows="4" placeholder="Your review"></textarea>
               <div class="mt-3">
                    <button class="bg-letterboxd-4 font-myfont trakinking widest py-1 px-2 rounded-sm"
                        type="submit">SAVE</button>
                </div>
            </div>
        </div>
        <input class="hidden" id="ready-log-tmdb-id" name="tmdb_id">
        <input class="hidden" id="ready-log-name" name="title">
        <input class="hidden" id="ready-log-poster-path" name="poster-path">
        <input class="hidden" id="ready-log-release-year" name="release-year">
        <input type="hidden" id="ready-log-rating" name="removeRating" value="ignore" >
                
    </form>
</div>